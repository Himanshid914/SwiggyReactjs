{"ast":null,"code":"import{useState}from\"react\";import InputControl from\"./InputControl\";import{Link,useNavigate}from\"react-router-dom\";import{signInWithEmailAndPassword}from\"firebase/auth\";import{auth}from\"../firebase\";import{useDispatch}from\"react-redux\";import{setUser}from\"../utils/userSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Login=()=>{const[loginInProcess,setLoginInProcess]=useState(false);const[errorMessage,setErrorMessage]=useState(\"\");const[localUserData,setLocalUserData]=useState({email:\"\",password:\"\"});//react-router-dom hook to navigate to home once logged in.\nconst navigate=useNavigate();//store operations\nconst dispatch=useDispatch();const handleClick=()=>{if(!localUserData.email||!localUserData.password){setErrorMessage(\"Please fill every field\");setTimeout(()=>{setErrorMessage(\"\");},2000);return;}//verify details from firebase database\nsetLoginInProcess(true);signInWithEmailAndPassword(auth,localUserData.email,localUserData.password).then(res=>{setLoginInProcess(false);//dispatch this user to user slice in store.\ndispatch(setUser(localUserData.email));navigate(\"/\");}).catch(err=>{setErrorMessage(err.code+\" \"+err.message);console.log(errorMessage);setTimeout(()=>{setErrorMessage(\"\");},5000);setLoginInProcess(false);});setLocalUserData({email:\"\",password:\"\"});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-1/2 flex flex-col items-center mx-auto border rounded border-gray-500  p-5 m-5\",children:[/*#__PURE__*/_jsx(InputControl,{label:\"Email\",placeholder:\"Enter Email Address\",type:\"email\",value:localUserData.email,onChange:event=>setLocalUserData(prev=>({...prev,email:event.target.value}))}),/*#__PURE__*/_jsx(InputControl,{label:\"Password\",placeholder:\"Enter Password\",type:\"password\",value:localUserData.password,onChange:event=>setLocalUserData(prev=>({...prev,password:event.target.value}))}),errorMessage!==\"\"&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 font-Arvo\",children:errorMessage}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full m-2\",children:loginInProcess?/*#__PURE__*/_jsx(\"button\",{className:\"bg-gray-500 border rounded p-2 w-full font-Arvo text-lg\",disabled:true,onClick:handleClick,children:\"Log In\"}):/*#__PURE__*/_jsx(\"button\",{className:\"bg-green-400 border rounded p-2 w-full font-Arvo text-lg\",onClick:handleClick,children:\"Log In\"})}),/*#__PURE__*/_jsxs(\"p\",{className:\"font-Arvo\",children:[\"Don't have an account,\",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-blue-500 hover:cursor-pointer\",children:[\" \",\"Sign Up\",\" \"]})}),\" \",\"to continue.\"]})]})})});};export default Login;","map":{"version":3,"names":["useState","InputControl","Link","useNavigate","signInWithEmailAndPassword","auth","useDispatch","setUser","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","loginInProcess","setLoginInProcess","errorMessage","setErrorMessage","localUserData","setLocalUserData","email","password","navigate","dispatch","handleClick","setTimeout","then","res","catch","err","code","message","console","log","children","className","label","placeholder","type","value","onChange","event","prev","target","disabled","onClick","to"],"sources":["/Users/himanshi/Desktop/swiggyreact/src/components/Login.js"],"sourcesContent":["import { useState } from \"react\";\nimport InputControl from \"./InputControl\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { signInWithEmailAndPassword } from \"firebase/auth\";\nimport { auth } from \"../firebase\";\nimport { useDispatch } from \"react-redux\"; \nimport { setUser } from \"../utils/userSlice\";\n\nconst Login = () => {\n  const [loginInProcess, setLoginInProcess] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [localUserData, setLocalUserData] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  //react-router-dom hook to navigate to home once logged in.\n  const navigate = useNavigate();\n\n  //store operations\n  const dispatch = useDispatch();\n\n  const handleClick = () => {\n    if (!localUserData.email || !localUserData.password) {\n      setErrorMessage(\"Please fill every field\");\n      setTimeout(() => {\n        setErrorMessage(\"\");\n      }, 2000);\n\n      return;\n    }\n\n    //verify details from firebase database\n    setLoginInProcess(true);\n    signInWithEmailAndPassword(\n      auth,\n      localUserData.email,\n      localUserData.password\n    )\n      .then((res) => {\n        setLoginInProcess(false);\n        //dispatch this user to user slice in store.\n        dispatch(setUser(localUserData.email));\n        navigate(\"/\");\n      })\n      .catch((err) => {\n        setErrorMessage(err.code + \" \" + err.message);\n        console.log(errorMessage);\n        setTimeout(() => {\n          setErrorMessage(\"\");\n        }, 5000);\n        setLoginInProcess(false);\n      });\n\n    setLocalUserData({\n      email: \"\",\n      password: \"\",\n    });\n  };\n\n  return (\n    <>\n      <div className=\"w-full min-h-screen\">\n        <div className=\"w-1/2 flex flex-col items-center mx-auto border rounded border-gray-500  p-5 m-5\">\n          <InputControl\n            label=\"Email\"\n            placeholder=\"Enter Email Address\"\n            type=\"email\"\n            value={localUserData.email}\n            onChange={(event) =>\n              setLocalUserData((prev) => ({\n                ...prev,\n                email: event.target.value,\n              }))\n            }\n          />\n\n          <InputControl\n            label=\"Password\"\n            placeholder=\"Enter Password\"\n            type=\"password\"\n            value={localUserData.password}\n            onChange={(event) =>\n              setLocalUserData((prev) => ({\n                ...prev,\n                password: event.target.value,\n              }))\n            }\n          />\n\n          {errorMessage !== \"\" && (\n            <p className=\"text-red-500 font-Arvo\">{errorMessage}</p>\n          )}\n\n          <div className=\"w-full m-2\">\n            {\n              loginInProcess ? (\n                <button\n              className=\"bg-gray-500 border rounded p-2 w-full font-Arvo text-lg\" disabled={true}\n              onClick={handleClick}\n            >\n              Log In\n            </button>\n              ): (\n                <button\n              className=\"bg-green-400 border rounded p-2 w-full font-Arvo text-lg\"\n              onClick={handleClick}\n            >\n              Log In\n            </button>\n              )\n            }\n          </div>\n\n          <p className=\"font-Arvo\">\n            Don't have an account,\n            <Link to=\"/signup\">\n              <span className=\"text-blue-500 hover:cursor-pointer\">\n                {\" \"}\n                Sign Up{\" \"}\n              </span>\n            </Link>{\" \"}\n            to continue.\n          </p>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}