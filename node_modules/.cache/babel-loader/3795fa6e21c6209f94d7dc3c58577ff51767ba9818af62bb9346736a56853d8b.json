{"ast":null,"code":"import{useEffect,useState}from\"react\";import{database}from\"../firebase\";import{IMG_CDN_URL}from\"./Config\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const OrderHistory=currentUser=>{const[orders,setOrders]=useState(null);const uid=currentUser.currentUser.uid;useEffect(()=>{const fetchData=()=>{const databaseRef=database.ref(\"users/\"+uid);databaseRef.on(\"value\",snapshot=>{const val=snapshot.val();if(val){const data=Object.values(val);setOrders(data);}// const data = Object?.values(snapshot.val());\n// setOrders(data);\n});console.log(orders);// databaseRef.off(\"value\");\n};fetchData();},[orders,uid]);return/*#__PURE__*/_jsx(_Fragment,{children:orders!=null&&orders.length>0&&orders.map(order=>{const path=\"/restaruant/\"+order.restaurant_id;return/*#__PURE__*/_jsxs(\"div\",{className:\"my-1 flex \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-12 mx-2 overflow-hidden\",children:/*#__PURE__*/_jsx(Link,{to:path,children:/*#__PURE__*/_jsx(\"img\",{className:\"min-h-full max-h-full object-fill rounded\",src:IMG_CDN_URL+order.logo,alt:\"restaurant logo\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-Arvo\",children:order.restaurantName})}),order.items.map(item=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"flex font-Arvo text-sm\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mx-2\",children:item.name}),/*#__PURE__*/_jsx(\"h3\",{className:\"mx-2\",children:item.price/100}),/*#__PURE__*/_jsx(\"h3\",{className:\"mx-2\",children:item.quantity})]});})]})]});})});};export default OrderHistory;","map":{"version":3,"names":["useEffect","useState","database","IMG_CDN_URL","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OrderHistory","currentUser","orders","setOrders","uid","fetchData","databaseRef","ref","on","snapshot","val","data","Object","values","console","log","children","length","map","order","path","restaurant_id","className","to","src","logo","alt","restaurantName","items","item","name","price","quantity"],"sources":["/Users/himanshi/Desktop/swiggyreact/src/components/OrderHistory.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { database } from \"../firebase\";\nimport { IMG_CDN_URL } from \"./Config\";\nimport { Link } from \"react-router-dom\";\n\nconst OrderHistory = (currentUser) => {\n  const [orders, setOrders] = useState(null);\n  const uid = currentUser.currentUser.uid;\n\n  useEffect(() => {\n    const fetchData = () => {\n      const databaseRef = database.ref(\"users/\" + uid);\n\n      databaseRef.on(\"value\", (snapshot) => {\n        const val= snapshot.val();\n        if(val){\n          const data = Object.values(val);\n          setOrders(data);\n        }\n        // const data = Object?.values(snapshot.val());\n        // setOrders(data);\n      });\n      console.log(orders);\n      // databaseRef.off(\"value\");\n    };\n\n    fetchData();\n  }, [orders, uid]);\n\n\n  return (\n    <>\n      {orders != null &&\n        orders.length > 0 &&\n        orders.map((order) => {\n          const path = \"/restaruant/\" + order.restaurant_id;\n          return (\n            <div className=\"my-1 flex \">\n              {/* left side: logo */}\n              <div className=\"w-16 h-12 mx-2 overflow-hidden\">\n                <Link to={path}>\n                  <img\n                    className=\"min-h-full max-h-full object-fill rounded\"\n                    src={IMG_CDN_URL + order.logo}\n                    alt=\"restaurant logo\"\n                  />\n                </Link>\n              </div>\n              {/* right side for other details: top restaruant, below menu */}\n              <div>\n                {/* restaurant */}\n                <div>\n                  <h3 className=\"text-lg font-Arvo\">{order.restaurantName}</h3>\n                </div>\n                {/* menu */}\n                {order.items.map((item) => {\n                  return (\n                    <div className=\"flex font-Arvo text-sm\">\n                      <h3 className=\"mx-2\">{item.name}</h3>\n                      <h3 className=\"mx-2\">{item.price / 100}</h3>\n                      <h3 className=\"mx-2\">{item.quantity}</h3>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          );\n        })}\n    </>\n  );\n};\n\nexport default OrderHistory;"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,QAAQ,KAAQ,aAAa,CACtC,OAASC,WAAW,KAAQ,UAAU,CACtC,OAASC,IAAI,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAExC,KAAM,CAAAC,YAAY,CAAIC,WAAW,EAAK,CACpC,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAAAc,GAAG,CAAGH,WAAW,CAACA,WAAW,CAACG,GAAG,CAEvCf,SAAS,CAAC,IAAM,CACd,KAAM,CAAAgB,SAAS,CAAGA,CAAA,GAAM,CACtB,KAAM,CAAAC,WAAW,CAAGf,QAAQ,CAACgB,GAAG,CAAC,QAAQ,CAAGH,GAAG,CAAC,CAEhDE,WAAW,CAACE,EAAE,CAAC,OAAO,CAAGC,QAAQ,EAAK,CACpC,KAAM,CAAAC,GAAG,CAAED,QAAQ,CAACC,GAAG,CAAC,CAAC,CACzB,GAAGA,GAAG,CAAC,CACL,KAAM,CAAAC,IAAI,CAAGC,MAAM,CAACC,MAAM,CAACH,GAAG,CAAC,CAC/BP,SAAS,CAACQ,IAAI,CAAC,CACjB,CACA;AACA;AACF,CAAC,CAAC,CACFG,OAAO,CAACC,GAAG,CAACb,MAAM,CAAC,CACnB;AACF,CAAC,CAEDG,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACH,MAAM,CAAEE,GAAG,CAAC,CAAC,CAGjB,mBACET,IAAA,CAAAI,SAAA,EAAAiB,QAAA,CACGd,MAAM,EAAI,IAAI,EACbA,MAAM,CAACe,MAAM,CAAG,CAAC,EACjBf,MAAM,CAACgB,GAAG,CAAEC,KAAK,EAAK,CACpB,KAAM,CAAAC,IAAI,CAAG,cAAc,CAAGD,KAAK,CAACE,aAAa,CACjD,mBACExB,KAAA,QAAKyB,SAAS,CAAC,YAAY,CAAAN,QAAA,eAEzBrB,IAAA,QAAK2B,SAAS,CAAC,gCAAgC,CAAAN,QAAA,cAC7CrB,IAAA,CAACF,IAAI,EAAC8B,EAAE,CAAEH,IAAK,CAAAJ,QAAA,cACbrB,IAAA,QACE2B,SAAS,CAAC,2CAA2C,CACrDE,GAAG,CAAEhC,WAAW,CAAG2B,KAAK,CAACM,IAAK,CAC9BC,GAAG,CAAC,iBAAiB,CACtB,CAAC,CACE,CAAC,CACJ,CAAC,cAEN7B,KAAA,QAAAmB,QAAA,eAEErB,IAAA,QAAAqB,QAAA,cACErB,IAAA,OAAI2B,SAAS,CAAC,mBAAmB,CAAAN,QAAA,CAAEG,KAAK,CAACQ,cAAc,CAAK,CAAC,CAC1D,CAAC,CAELR,KAAK,CAACS,KAAK,CAACV,GAAG,CAAEW,IAAI,EAAK,CACzB,mBACEhC,KAAA,QAAKyB,SAAS,CAAC,wBAAwB,CAAAN,QAAA,eACrCrB,IAAA,OAAI2B,SAAS,CAAC,MAAM,CAAAN,QAAA,CAAEa,IAAI,CAACC,IAAI,CAAK,CAAC,cACrCnC,IAAA,OAAI2B,SAAS,CAAC,MAAM,CAAAN,QAAA,CAAEa,IAAI,CAACE,KAAK,CAAG,GAAG,CAAK,CAAC,cAC5CpC,IAAA,OAAI2B,SAAS,CAAC,MAAM,CAAAN,QAAA,CAAEa,IAAI,CAACG,QAAQ,CAAK,CAAC,EACtC,CAAC,CAEV,CAAC,CAAC,EACC,CAAC,EACH,CAAC,CAEV,CAAC,CAAC,CACJ,CAAC,CAEP,CAAC,CAED,cAAe,CAAAhC,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}