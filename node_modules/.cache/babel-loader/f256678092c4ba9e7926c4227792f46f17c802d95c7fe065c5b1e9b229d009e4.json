{"ast":null,"code":"import{useState,useContext,useEffect}from\"react\";import{IMG_CDN_URL}from\"./Config\";import{useDispatch,useSelector}from\"react-redux\";import{checkAvailability,findQuantity,removeMenu}from\"../utils/utils\";import{useParams}from\"react-router-dom\";import RestaurantContext from\"../utils/RestaurantContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const MealComponent=curMenu=>{var _curMenu$curMenu,_curMenu$curMenu$card,_curMenu$curMenu3,_curMenu$curMenu3$car,_curMenu$curMenu3$car2;//destructure props\nconst{name,price,description,imageId}=curMenu===null||curMenu===void 0?void 0:(_curMenu$curMenu=curMenu.curMenu)===null||_curMenu$curMenu===void 0?void 0:(_curMenu$curMenu$card=_curMenu$curMenu.card)===null||_curMenu$curMenu$card===void 0?void 0:_curMenu$curMenu$card.info;//state variables\nconst[itemQuantity,setItemQuantity]=useState(0);//Read data from context API\nconst myData=useContext(RestaurantContext);//fetch the id of opened restaurant\nconst{id}=useParams();//Cart operations\n//susbcribe to cart\nconst cartItems=useSelector(store=>store.cart.cartItems);//push to cart\nconst dispatch=useDispatch();//action functions\nconst handleAdd=meal=>{const check=checkAvailability(id,meal,cartItems,dispatch,myData);if(check){setItemQuantity(itemQuantity+1);}};const handleRemove=meal=>{removeMenu(meal,cartItems,dispatch);setItemQuantity(Math.max(0,itemQuantity-1));};useEffect(()=>{var _curMenu$curMenu2,_curMenu$curMenu2$car,_curMenu$curMenu2$car2;setItemQuantity(findQuantity(curMenu===null||curMenu===void 0?void 0:(_curMenu$curMenu2=curMenu.curMenu)===null||_curMenu$curMenu2===void 0?void 0:(_curMenu$curMenu2$car=_curMenu$curMenu2.card)===null||_curMenu$curMenu2$car===void 0?void 0:(_curMenu$curMenu2$car2=_curMenu$curMenu2$car.info)===null||_curMenu$curMenu2$car2===void 0?void 0:_curMenu$curMenu2$car2.id,cartItems));},[cartItems,curMenu===null||curMenu===void 0?void 0:(_curMenu$curMenu3=curMenu.curMenu)===null||_curMenu$curMenu3===void 0?void 0:(_curMenu$curMenu3$car=_curMenu$curMenu3.card)===null||_curMenu$curMenu3$car===void 0?void 0:(_curMenu$curMenu3$car2=_curMenu$curMenu3$car.info)===null||_curMenu$curMenu3$car2===void 0?void 0:_curMenu$curMenu3$car2.id]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex p-[5px] items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-[80%] mb-[10px] px-[10px]\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mt-0 mb-[8px]\",children:name}),/*#__PURE__*/_jsxs(\"h5\",{className:\"my-[4px]  text-[#5e5d5d]\",children:[price/100,\"Rs\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"my-[4px] text-[#8d8d8d]\",children:description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-[20%] text-center px-[10px] overflow-hidden\",children:[imageId?/*#__PURE__*/_jsx(\"img\",{className:\"min-w-full max-w-full object-fill rounded-md\",src:IMG_CDN_URL+imageId,alt:\"meal\"}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-evenly rounded\",children:[/*#__PURE__*/_jsx(\"button\",{className:\" text-sm text-white p-1 transform transition duration-300 hover:scale-125\",onClick:()=>{var _curMenu$curMenu4,_curMenu$curMenu4$car;return handleRemove(curMenu===null||curMenu===void 0?void 0:(_curMenu$curMenu4=curMenu.curMenu)===null||_curMenu$curMenu4===void 0?void 0:(_curMenu$curMenu4$car=_curMenu$curMenu4.card)===null||_curMenu$curMenu4$car===void 0?void 0:_curMenu$curMenu4$car.info);},children:\"\\u2796\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"p-1\",children:itemQuantity}),/*#__PURE__*/_jsx(\"button\",{className:\" text-sm text-white p-1 transform transition duration-300 hover:scale-125\",onClick:()=>{var _curMenu$curMenu5,_curMenu$curMenu5$car;return handleAdd(curMenu===null||curMenu===void 0?void 0:(_curMenu$curMenu5=curMenu.curMenu)===null||_curMenu$curMenu5===void 0?void 0:(_curMenu$curMenu5$car=_curMenu$curMenu5.card)===null||_curMenu$curMenu5$car===void 0?void 0:_curMenu$curMenu5$car.info);},children:\"\\u2795\"})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"w-[100%]\"})]});};export default MealComponent;","map":{"version":3,"names":["useState","useContext","useEffect","IMG_CDN_URL","useDispatch","useSelector","checkAvailability","findQuantity","removeMenu","useParams","RestaurantContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MealComponent","curMenu","_curMenu$curMenu","_curMenu$curMenu$card","_curMenu$curMenu3","_curMenu$curMenu3$car","_curMenu$curMenu3$car2","name","price","description","imageId","card","info","itemQuantity","setItemQuantity","myData","id","cartItems","store","cart","dispatch","handleAdd","meal","check","handleRemove","Math","max","_curMenu$curMenu2","_curMenu$curMenu2$car","_curMenu$curMenu2$car2","children","className","src","alt","onClick","_curMenu$curMenu4","_curMenu$curMenu4$car","_curMenu$curMenu5","_curMenu$curMenu5$car"],"sources":["/Users/himanshi/Desktop/swiggyreact/src/components/MealComponent.js"],"sourcesContent":["import {useState, useContext, useEffect} from \"react\";\nimport { IMG_CDN_URL } from \"./Config\";\nimport { useDispatch ,useSelector } from \"react-redux\";\nimport { checkAvailability, findQuantity, removeMenu } from \"../utils/utils\";\nimport { useParams } from \"react-router-dom\";\nimport RestaurantContext from \"../utils/RestaurantContext\";\n\nconst MealComponent = (curMenu) => {\n\n    //destructure props\n    const {name, price, description, imageId} = curMenu?.curMenu?.card?.info;\n\n    //state variables\n    const [itemQuantity, setItemQuantity] = useState(0);\n\n    //Read data from context API\n    const myData = useContext(RestaurantContext);\n\n    //fetch the id of opened restaurant\n    const { id } = useParams();\n    \n//Cart operations\n    //susbcribe to cart\n    const cartItems = useSelector(store => store.cart.cartItems);\n    //push to cart\n    const dispatch = useDispatch();\n\n    //action functions\n    const handleAdd = (meal) => {\n        const check = checkAvailability(id, meal, cartItems, dispatch, myData);\n        if(check){\n            setItemQuantity(itemQuantity+1);\n        }\n    }\n\n    const handleRemove = (meal) => {\n        removeMenu(meal, cartItems, dispatch);\n        setItemQuantity(Math.max(0, itemQuantity-1));\n    }\n\n    useEffect(() => {\n      setItemQuantity(findQuantity(curMenu?.curMenu?.card?.info?.id, cartItems));\n    }, [cartItems, curMenu?.curMenu?.card?.info?.id,]);\n    \n\n  return (\n    <>\n        <div className=\"flex p-[5px] items-center\">\n          <div className=\"w-[80%] mb-[10px] px-[10px]\">\n            <h4 className=\"mt-0 mb-[8px]\">{name}</h4>\n            <h5 className=\"my-[4px]  text-[#5e5d5d]\">\n              {price / 100}Rs\n            </h5>\n            <p className=\"my-[4px] text-[#8d8d8d]\">\n              {description}\n            </p>\n          </div>\n          <div className=\"relative w-[20%] text-center px-[10px] overflow-hidden\">\n            {imageId ? (\n              <img\n                className=\"min-w-full max-w-full object-fill rounded-md\"\n                src={IMG_CDN_URL + imageId}\n                alt=\"meal\"\n              />\n            ) : (\n              <></>\n            )}\n            <div className=\"flex justify-evenly rounded\">\n              <button\n                className=\" text-sm text-white p-1 transform transition duration-300 hover:scale-125\"\n                onClick={() => handleRemove(curMenu?.curMenu?.card?.info)}\n              >\n                ➖\n              </button>\n\n              <h1 className=\"p-1\">{itemQuantity}</h1>\n\n              <button\n                className=\" text-sm text-white p-1 transform transition duration-300 hover:scale-125\"\n                onClick={() => handleAdd(curMenu?.curMenu?.card?.info)}\n              >\n                ➕\n              </button>\n            </div>\n          </div>\n        </div>\n        <hr className=\"w-[100%]\" />\n        {/* {index < menu.length - 1 ? (\n          <div>\n            \n          </div>\n        ) : (\n          <></>\n        )} */}\n    </>\n  );\n};\n\nexport default MealComponent;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}